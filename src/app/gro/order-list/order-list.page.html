<ion-header>
  <ion-toolbar>
    <div style="display: flex;">
      <ion-icon
      name="chevron-back-outline"
      size="large"
      (click)="goBack()"
    ></ion-icon>
      <ion-label class="ion-padding">My Orders</ion-label>
    </div>
  </ion-toolbar>
</ion-header>
<ion-content>
  <ion-segment
  value="current_orders"
  color="success"
  (ionChange)="orderSegmentChange($event)"
>
  <ion-segment-button value="current_orders">Current Orders</ion-segment-button>
  <ion-segment-button value="past_orders">Past Orders</ion-segment-button>
</ion-segment>
  <ion-list *ngIf="showCurrentOrders && currentOrders.length">
    <ion-item-divider>
      <ion-label>
        Current Orders
      </ion-label>
    </ion-item-divider>
    <ng-container
      [ngTemplateOutlet]="ordersList"
      [ngTemplateOutletContext]="{orders: currentOrders}"
    ></ng-container>
  </ion-list>
  <gro-error [type]="'currentOrder'" *ngIf="showCurrentOrders && !currentOrders.length"></gro-error>
  <ion-list *ngIf="!showCurrentOrders && pastOrders.length">
    <ion-item-divider>
      <ion-label>
        Past Orders
      </ion-label>
    </ion-item-divider>
    <ng-container
      [ngTemplateOutlet]="ordersList"
      [ngTemplateOutletContext]="{orders: pastOrders}"
    ></ng-container>
  </ion-list>
  <gro-error [type]="'pastOrder'" *ngIf="!showCurrentOrders && !pastOrders.length"></gro-error>
</ion-content>

<ng-template #ordersList let-orders="orders">
  <ion-grid *ngFor="let order of orders" class="ion-no-padding">
    <ion-card [routerLink]="['/order', order.id]">
      <ion-card-content class="ion-no-padding">
        <ion-item class="ion-no-padding">
          <ion-grid>
            <ion-row>
              <ion-col size="8">
                <ion-row>
                  <span class="span-store-name">
                    {{order.store.storeName | titlecase}}
                  </span>
                </ion-row>
                <ion-row>
                    {{order.store.area}}
                </ion-row>
              </ion-col>
              <ion-col size="4">
                <ion-row>
                  <ion-col size="2"
                    ><ion-icon
                      name="checkmark-circle"
                      color="success"
                    ></ion-icon
                  ></ion-col>
                  <ion-col size="10"><span>Delivered</span></ion-col>
                </ion-row>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-item>
        <ion-row class="ion-padding-start">
          <ion-col><span class="span-order-data">{{order.totalNumOfProducts === 1 ? '1 item': order.totalNumOfProducts + ' items'}}</span></ion-col>
          <ion-col><span class="span-order-data">Rs.{{order.billTotal}}</span></ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <div style="display: flex; flex-direction: column; padding: 5px;">
              <span>Ordered on</span>
              <span class="span-order-data">Fri20, 2019</span>
            </div>
          </ion-col>
          <ion-col>
            <ion-button color="light" fill="clear"><ion-icon name="reload-outline" color="dark"></ion-icon><span style="color: black;">Repeat Order</span></ion-button
            >
          </ion-col>
        </ion-row>
      </ion-card-content>
    </ion-card>
  </ion-grid>
</ng-template>
